<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Examples - Specific use cases - Tooltip</title>

    <link href="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/css/orange-helvetica.min.css" rel="stylesheet" integrity="sha384-A0Qk1uKfS1i83/YuU13i2nx5pk79PkIfNFOVzTcjCMPGKIDj9Lqx9lJmV7cdBVQZ" crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/css/boosted.min.css" rel="stylesheet" integrity="sha384-laZ3JUZ5Ln2YqhfBvadDpNyBo7w5qmWaRnnXuRwNhJeTEFuSdGbzl4ZGHAEnTozR" crossorigin="anonymous" />
    <link href="../assets/tarteaucitron-config.css" rel="stylesheet" />

    <link rel="apple-touch-icon" href="../images/favicons/apple-touch-icon.png" sizes="180x180" />
    <link rel="icon" href="../images/favicons/favicon-32x32.png" sizes="32x32" type="image/png" />
    <link rel="icon" href="../images/favicons/favicon-16x16.png" sizes="16x16" type="image/png" />
    <link rel="manifest" href="../images/favicons/manifest.json" />
    <link rel="mask-icon" href="../images/favicons/safari-pinned-tab.svg" color="#000" />
    <link rel="icon" href="../images/favicons/favicon.ico" />
    <meta name="msapplication-config" content="../images/favicons/browserconfig.xml" />
    <meta name="theme-color" content="#000" />
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <script type="text/javascript" src="../../dist/ods-charts.js"></script>
    <script type="text/javascript" src="./index.js"></script>
  </head>
  <body>
    <header data-bs-theme="dark">
      <nav class="navbar navbar-expand-lg" aria-label="Global navigation">
        <div class="container-xxl">
          <div class="navbar-brand me-auto me-lg-4">
            <a class="stretched-link" href="./">
              <img src="../images/orange-logo.svg" width="50" height="50" alt="ODS Charts - Back to Home" loading="lazy" />
            </a>
            <h1 class="title">Orange Design System Charts</h1>
          </div>
        </div>
      </nav>
    </header>
    <div class="title-bar">
      <div class="container-xxl">
        <h1 class="display-1">Tooltip</h1>
      </div>
    </div>
    <div class="container pt-3">
      <div class="card w-100">
        <div class="card-body">
          <h5 class="card-title">Confine tooltip example</h5>
          <p class="card-text">ODS Charts library uses the tooltip containment feature of the Apache ECharts library to ensure that the tooltip or popover is displayed within the confines of the graph, avoiding overflow beyond the display window.</p>
          <p class="card-text">
            This function is activated by configuring the graph options as follows:
            <code>
              <pre>
tooltip: {
    confine: true,
}
              </pre>
            </code>
          </p>
          <div id="htmlId">
            <div class="border border-light position-relative">
              <div class="chart_title">
                <h4 class="display-4 mx-3 mb-1 mt-3">Title</h4>
                <h5 class="display-5 mx-3 mb-1 mt-0">Sub-Title</h5>
              </div>
              <div id="barLine_holder">
                <div id="barLine_chart" style="width: 100%; height: 50vh" class="position-relative"></div>
              </div>
              <div id="barLine_legend"></div>
            </div>
          </div>
          <script>
            addViewCode();
          </script>
        </div>
      </div>
      <script id="codeId">
        ///////////////////////////////////////////////////
        // Used data
        ///////////////////////////////////////////////////

        // Data to be displayed
        var dataOptions = {
          grid: {
            left: '0%',
            right: '0%',
          },
          xAxis: {
            type: 'category',
            data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          },
          yAxis: {},
          series: [
            {
              data: [10, 22, 28.8956454657, 23, 19, 15],
              type: 'bar',
            },
            {
              data: [12, 28.8956454657, 23, 15, 15, 18],
              type: 'line',
            },
          ],
          legend: {
            data: ['label 0', 'label 1'],
          },
          tooltip: {
            confine: true,
          },
        };

        ///////////////////////////////////////////////////
        // ODS Charts
        ///////////////////////////////////////////////////
        // Build the theme
        var themeManager = ODSCharts.getThemeManager();
        echarts.registerTheme(themeManager.name, themeManager.theme);

        // Get the chart holder and initiate it with the generated theme
        var div = document.getElementById('barLine_chart');
        var myChart = echarts.init(div, themeManager.name, {
          renderer: 'svg',
        });

        // Set the data to be displayed.
        themeManager.setDataOptions(dataOptions);
        // Register the externalization of the legend.
        themeManager.externalizeLegends(myChart, '#barLine_legend');
        // Manage window size changed
        themeManager.manageChartResize(myChart, 'barLine_chart');
        // Register the externalization of the tooltip/popup
        themeManager.externalizePopover();
        // Display the chart using the configured theme and data.
        myChart.setOption(themeManager.getChartOptions());
      </script>
    </div>

    <div class="container pt-3">
      <div class="card w-100">
        <div class="card-body">
          <h5 class="card-title">Specific tooltip content with links example</h5>
          <p class="card-text">You may need to specify a specific tooltip content (which may contain links).</p>
          <p class="card-text">This can be done using the second parameter of the method <code>externalizePopover</code>.</p>
          <p class="card-text">This parameter must implement the <code>ODSChartsPopoverDefinition</code> interface. By default it is initialized with <code>ODSChartsPopoverManagers.NONE</code> But you can extend it to implement <code>getPopupContent</code> method and return the html code to be displayed in the tooltip.</p>
          <p class="card-text">
            Here is an extract of our example below:
            <code>
              <pre>
                themeManager.externalizePopover(undefined, {
                  ...ODSCharts.ODSChartsPopoverManagers.NONE,
                  getPopupContent: (tooltipElements) => {
                    return 'This is my HTML code that may content &lt;a href="https://github.com/Orange-OpenSource/ods-charts"&gt;a link&lt;/a&gt;';
                  },
                });
              </pre>
            </code>
          </p>
          <div id="link_htmlId">
            <div class="border border-light position-relative">
              <div class="chart_title">
                <h4 class="display-4 mx-3 mb-1 mt-3">Title</h4>
                <h5 class="display-5 mx-3 mb-1 mt-0">Sub-Title</h5>
              </div>
              <div id="link_holder">
                <div id="link_chart" style="width: 100%; height: 50vh" class="position-relative"></div>
              </div>
              <div id="link_legend"></div>
            </div>
          </div>
          <script>
            addViewCode('link_');
          </script>
        </div>
      </div>
      <script id="link_codeId">
        ///////////////////////////////////////////////////
        // Used data
        ///////////////////////////////////////////////////

        // Data to be displayed
        var dataOptions = {
          xAxis: { type: 'category', data: ['24 May', '25 May', '26 May', '27 May', '28 May', '29 May', '30 May'] },
          yAxis: {},
          series: [
            { data: [510, 1414, 1412, 1406, 1400, 1430, 784], type: 'bar', stack: 'true', barWidth: 30 },
            { data: [5, 0, 10, 20, 0, 0, 0], type: 'bar', stack: 'true', barWidth: 30 },
          ],
          legend: { show: false },
          tooltip: {
            confine: true,
          },
          grid: {
            left: 0,
            right: 0,
            top: 5,
            bottom: 0,
            containLabel: true,
          },
        };

        var popupContents = [
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >510 errors</a>\n</span><br><span class="font-weight-bold">Truc: <a href="../"\n                target="_blank"\n                class=""\n            >5 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >1414 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >1412 errors</a>\n</span><br><span class="font-weight-bold">Truc: <a href="../"\n                target="_blank"\n                class=""\n            >10 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >1406 errors</a>\n</span><br><span class="font-weight-bold">Truc: <a href="../"\n                target="_blank"\n                class=""\n            >20 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >1400 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >1430 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
          '<span class="font-weight-bold">Notification - Http push: <a href="../"\n                target="_blank"\n                class=""\n            >784 errors</a>\n</span><br><span class="font-weight-bold"><a data-analytics="show_audit_logs_from_dashboard"\n                href="../"\n                target="_blank"\n                class=""\n            >See all errors</a>\n</span>',
        ];

        ///////////////////////////////////////////////////
        // ODS Charts
        ///////////////////////////////////////////////////
        // Build the theme
        var themeManager = ODSCharts.getThemeManager({ categoricalColors: [{ colorIndex: 4, colorPalette: ODSCharts.ODSChartsCategoricalColorsSet.DARKER_TINTS }] });
        echarts.registerTheme(themeManager.name, themeManager.theme);

        // Get the chart holder and initiate it with the generated theme
        var div = document.getElementById('link_chart');
        var myChart = echarts.init(div, themeManager.name, {
          renderer: 'svg',
        });

        // Set the data to be displayed.
        themeManager.setDataOptions(dataOptions);
        // Register the externalization of the legend.
        themeManager.manageChartResize(myChart, 'link_chart');
        // Register the externalization of the tooltip/popup
        themeManager.externalizePopover(undefined, {
          ...ODSCharts.ODSChartsPopoverManagers.NONE,
          getPopupContent: (tooltipElements) => {
            return tooltipElements.length > 0 && popupContents.length > tooltipElements[0].dataIndex ? popupContents[tooltipElements[0].dataIndex] : '';
          },
        });
        // Display the chart using the configured theme and data.
        myChart.setOption(themeManager.getChartOptions());
      </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/js/boosted.bundle.min.js" integrity="sha384-3RoJImQ+Yz4jAyP6xW29kJhqJOE3rdjuu9wkNycjCuDnGAtC/crm79mLcwj1w2o/" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/tarteaucitronjs@1.17.0/tarteaucitron.min.js" integrity="sha384-g6Xxn1zA15svldHyZ/Ow+wUUeRxHf/v7eOOO2sMafcnMPFD25n80Yz/3bbhJBSoN" crossorigin="anonymous"></script>
    <script src="../assets/tarteaucitron-config.js"></script>
  </body>
</html>
